<?php

/**
 * @return array
 */
function etype_newsletters_action_info() {
  return [
    'etype_newsletters_add_node' => [
      'type' => 'node',
      'label' => t('Add node to newsletter'),
      'configurable' => FALSE,
      'triggers' => ['any'],
      'pass rows' => TRUE,
    ],
  ];
}

/**
 * @param $node
 * @param $context
 */
function etype_newsletters_add_node(&$node, $context) {
  $nid = db_merge('etype_newsletters')
    ->key(array('nid' => $node->nid))
    ->fields(array(
      'nid' => $node->nid,
    ))
    ->execute();
  dpm($nid);
}